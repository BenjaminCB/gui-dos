@inherits LayoutComponentBase
@inject NavigationManager NavMan
@inject ShoppingCart ShoppingCart

<MudThemeProvider Theme="BrandTheme"/>

<MudLayout>
    @* Navigation menu in the top of every page*@
    <MudAppBar Class="mud-primary">
        <BrandLogoButton/>
        <MudSpacer/>
        <MudHidden Breakpoint="Breakpoint.Xs">
            <NavMenu/>
        </MudHidden>
        <MudHidden Breakpoint="Breakpoint.SmAndUp">
            <MudIconButton Icon="@Icons.Outlined.Menu" Color="Color.Tertiary" OnClick="ToggleNav"/>
        </MudHidden>
        <MudSpacer/>
        <MudIconButton Icon="@Icons.Outlined.ShoppingCart" Color="Color.Tertiary" OnClick="ToggleCart"/>
    </MudAppBar>

    @* Navigation drawer for small viewports *@
    <MudDrawer @bind-Open="@_navOpen" Anchor="Anchor.Top"
     Variant="DrawerVariant.Temporary" >
        <MudDrawerHeader>
            <MudText Typo="Typo.h6"> Isværftet </MudText>
        </MudDrawerHeader>
        <NavMenu/>
    </MudDrawer>

    @* Shopping cart drawer *@
    <MudDrawer @bind-Open="@_cartOpen" Anchor="Anchor.Right" 
     Variant="DrawerVariant.Temporary" ClipMode="DrawerClipMode.Always">
        <MudDrawerHeader>
            <MudText Typo="Typo.h6">Indkøbskurv</MudText>
        </MudDrawerHeader>
    </MudDrawer>

    @* Page content *@
    <MudMainContent Style="min-height:100vh;">
        @Body
    </MudMainContent>

    @* Page footer *@
    <MudPaper Class="mud-primary justify-space-around d-flex" Elevation="4" Square="true">
        <MudText Typo="Typo.h6" Color="Color.Tertiary">
            Testing <br/>
        </MudText>
    </MudPaper>
</MudLayout>

@code
{
    bool _navOpen = false;

    bool _cartOpen = false;

    void ToggleCart() {
        _cartOpen = !_cartOpen;
    }

    void ToggleNav() {
        _navOpen = !_navOpen;
    }

    // MudBlazor theme customizations
    MudTheme BrandTheme = new MudTheme() 
    {
        Palette = new Palette()
        {
            Primary = "rgb(48, 157, 155)",
            Secondary = "rgb(151, 224, 230)",
            Tertiary = "rgb(255, 255, 255)",
        },
        LayoutProperties = new LayoutProperties()
        {
            AppbarHeight = "2cm"
        }
    };
}
